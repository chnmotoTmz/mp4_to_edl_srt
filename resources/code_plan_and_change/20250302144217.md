[CONTENT]
{
    "Development Plan": [
        "Step 1: Implement the `timecode_utils.py` module with the `TimecodeConverter` class to handle conversions between milliseconds, HH:MM:SS:FF (30fps), and HH:MM:SS,MMM.",
        "Step 2: Update the `segment.py` module. Modify the `Segment` class to include optional `scene_id` and `scene_description` attributes. Update `to_srt_dict` to embed scene information in the text block.",
        "Step 3: Implement the `scene.py` module. Create the `Scene` class to represent detected scenes with start/end times (ms), ID, and description. Add methods to format timecodes using `TimecodeConverter`.",
        "Step 4: Update the `edl_data.py` module. Modify the `EDLData` class to add scene information as comment lines (`* COMMENT`) before the corresponding event lines in the `to_string` method.",
        "Step 5: Update the `srt_data.py` module. Modify the `SRTData` class's `write_to_file` method to include scene information within the text block of each segment.",
        "Step 6: Implement the `scene_analysis.py` module. Create the `SceneAnalyzer` class with methods for loading a placeholder model, extracting frames using OpenCV, performing placeholder classification, detecting scene changes, and returning a list of `Scene` objects. Include a progress callback mechanism.",
        "Step 7: Modify the `mp4_file.py` module (which acts as the `MP4FileProcessor`). Add attributes for storing detected scenes and a `TimecodeConverter` instance. Implement methods to call the `SceneAnalyzer`, store the results, and assign scene information to existing `Segment` objects based on time overlap. Update `generate_edl_data` and `generate_srt_data` to use the `TimecodeConverter` and the scene info from segments.",
        "Step 8: Modify the `main.py` module. Integrate `ConfigManager`, `TimecodeConverter`, and `SceneAnalyzer`. Read scene analysis configuration. Initialize `SceneAnalyzer` conditionally. Pass necessary objects (`config`, `TimecodeConverter`, `SceneAnalyzer`) to `MP4File`. Implement a simple progress callback function and pass it to `MP4File`.",
        "Step 9: Create the `config.json` file. Add a `scene_analysis` section with `enabled` (boolean) and `frame_analysis_rate` (integer) options.",
        "Step 10: Modify the `gui.py` module. Add a checkbox/option to enable/disable scene analysis. Add a progress indicator (e.g., label or progress bar) specifically for the scene analysis phase. Update the logic to read the scene analysis setting and pass/apply it."
    ],
    "Incremental Change": [
        "```diff\n--- a/timecode_utils.py\n+++ b/timecode_utils.py\n@@ -0,0 +1,39 @@\n+class TimecodeConverter:\n+    \"\"\"\n+    Handles timecode conversions for a specific frame rate.\n+    Assumes non-drop frame.\n+    \"\"\"\n+    def __init__(self, frame_rate: int = 30):\n+        self.frame_rate = frame_rate\n+\n+    def ms_to_hhmmssff(self, ms: int) -> str:\n+        \"\"\"Converts milliseconds to HH:MM:SS:FF format.\"\"\"\n+        total_seconds = ms / 1000.0\n+        total_frames = int(total_seconds * self.frame_rate)\n+        hours = total_frames // (3600 * self.frame_rate)\n+        minutes = (total_frames % (3600 * self.frame_rate)) // (60 * self.frame_rate)\n+        secs = (total_frames % (60 * self.frame_rate)) // self.frame_rate\n+        frames = total_frames % self.frame_rate\n+        return f\"{hours:02d}:{minutes:02d}:{secs:02d}:{frames:02d}\"\n+\n+    def ms_to_hhmmssmmm(self, ms: int) -> str:\n+        \"\"\"Converts milliseconds to HH:MM:SS,MMM format.\"\"\"\n+        hours = ms // (1000 * 3600)\n+        ms %= (1000 * 3600)\n+        minutes = ms // (1000 * 60)\n+        ms %= (1000 * 60)\n+        secs = ms // 1000\n+        milliseconds = ms % 1000\n+        return f\"{hours:02d}:{minutes:02d}:{secs:02d},{milliseconds:03d}\"\n+\n+    def hhmmssff_to_ms(self, tc: str) -> int:\n+        \"\"\"Converts HH:MM:SS:FF to milliseconds.\"\"\"\n+        h, m, s, f = map(int, tc.split(\":\"))\n+        total_frames = h * 3600 * self.frame_rate + m * 60 * self.frame_rate + s * self.frame_rate + f\n+        return int(total_frames * 1000 / self.frame_rate)\n+\n+    def hhmmssmmm_to_ms(self, tc: str) -> int:\n+        \"\"\"Converts HH:MM:SS,MMM to milliseconds.\"\"\"\n+        parts = re.split(r'[:,]', tc)\n+        h, m, s, ms = map(int, parts)\n+        return h * 3600 * 1000 + m * 60 * 1000 + s * 1000 + ms\n```"
    ]
}
[/CONTENT]